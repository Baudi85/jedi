{"format_version":"1.10.0","animation_controllers":{"controller.animation.spark.flight.pilot":{"states":{"default":{"transitions":[{"controlled":"query.has_rider"}],"on_entry":["@s spark:park","/tag @s add plane","/tag @s remove piloted_ship"]},"controlled":{"on_entry":["@s spark:unpark","/function spark/flight/assign_pilot"],"on_exit":["/function spark/flight/revoke_pilot"],"transitions":[{"default":"!query.has_rider"}]}}},"controller.animation.spark.flight.velocity":{"states":{"default":{"transitions":[{"speed_1":"Math.sqrt(Math.clamp(Math.pow(query.ground_speed, 2) - math.pow(query.vertical_speed, 2), 0, 10000)) > 4"}],"on_entry":["/event entity @s spark:stop_moving","/tag @s remove is_moving"]},"speed_1":{"transitions":[{"stopping":"!q.is_chested"}],"on_entry":["/event entity @s spark:start_moving","/tag @s add is_moving"]},"stopping":{"transitions":[{"default":"Math.sqrt(Math.clamp(Math.pow(query.ground_speed, 2) - math.pow(query.vertical_speed, 2), 0, 10000)) < 4"}],"on_entry":["/tag @s add is_moving"]}}},"controller.animation.spark.flight.ground":{"states":{"default":{"transitions":[{"floating":"query.has_rider && (query.is_stunned || query.vertical_speed < -13)"}],"on_entry":["@s spark:set_ground","/tag @s add on_ground"]},"floating":{"animations":["landing_cooldown"],"transitions":[{"landing":"query.all_animations_finished && query.is_on_ground"}],"on_entry":["@s spark:set_fly","/tag @s remove on_ground"]},"landing":{"animations":["landing_cooldown","short_cooldown"],"transitions":[{"floating":"!query.is_on_ground && query.any_animation_finished"},{"default":"query.all_animations_finished && query.is_on_ground"}],"on_entry":["/tag @s add landing"],"on_exit":["/tag @s remove landing"]}}}}}
