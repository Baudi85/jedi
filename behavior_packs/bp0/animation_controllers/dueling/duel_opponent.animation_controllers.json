{"format_version":"1.19.0","animation_controllers":{"controller.animation.spark.duel_opponent.select_move":{"states":{"default":{"on_entry":["/tag @s remove blocking"],"transitions":[{"withdraw":"q.property('spark:evaded_attack') && Math.random(0, 100) < q.property('spark:chance_withdraw')"},{"block":"q.property('spark:evaded_attack')"},{"attack":"q.property('spark:player_move') == 'approach' && Math.random(0, 100) < q.property('spark:chance_react_offense')"},{"retreat":"q.property('spark:player_move') == 'approach' && Math.random(50, 100) > q.property('spark:chance_withstand')"},{"approach":"q.property('spark:player_move') == 'retreat' && Math.random(0, 50) < q.property('spark:chance_withstand')"},{"attack":"q.property('spark:player_move') == 'approach' && Math.random(0, 50) < q.property('spark:chance_pushback')"},{"block":"q.property('spark:player_move') == 'attack' && Math.random(0, 100) < q.property('spark:chance_react_defense')"},{"attack":"q.property('spark:player_move') != 'block' && Math.random(0, 100) < q.property('spark:chance_react_offense') && q.property('spark:player_move') != 'retreat'"},{"attack":"Math.random(0, 100) < q.property('spark:chance_attack') && q.property('spark:player_move') != 'retreat'"},{"power_attack":"Math.random(0, 100) < q.property('spark:chance_power_attack') && q.property('spark:player_move') != 'retreat'"},{"strafe":"Math.random(0, 100) < q.property('spark:chance_strafe')"},{"block":"Math.random(0, 100) < q.property('spark:chance_block')"},{"idle":"Math.random(0, 100) < q.property('spark:chance_idle')"}]},"idle":{"animations":["idle"],"on_entry":["@s set_move_idle"],"transitions":[{"withdraw":"q.property('spark:evaded_attack') && Math.random(0, 100) < q.property('spark:chance_withdraw')"},{"block":"q.property('spark:evaded_attack')"},{"default":"q.all_animations_finished"}]},"attack":{"animations":["attack"],"on_entry":["@s set_move_attack","/playsound sound.spark.jedi_lightsaber_attack @a ~ ~ ~"],"transitions":[{"withdraw":"q.property('spark:evaded_attack') && Math.random(0, 100) < q.property('spark:chance_withdraw')"},{"block":"q.property('spark:evaded_attack')"},{"default":"q.all_animations_finished"}]},"power_attack":{"animations":["power_attack"],"on_entry":["@s set_move_power_attack","/playsound sound.spark.jedi_lightsaber_attack @a ~ ~ ~"],"transitions":[{"withdraw":"q.property('spark:evaded_attack') && Math.random(0, 100) < q.property('spark:chance_withdraw')"},{"block":"q.property('spark:evaded_attack')"},{"default":"q.all_animations_finished"}]},"block":{"animations":["block"],"on_entry":["/tag @s add blocking","@s block_attack_if_evading","@s set_move_block","/playsound sound.spark.jedi_lightsaber_block_start @a ~ ~ ~"],"on_exit":["/playsound sound.spark.jedi_lightsaber_block_start @a ~ ~ ~"],"transitions":[{"attack":"q.property('spark:player_move') == 'attack' && Math.random(0, 140) < q.property('spark:chance_react_offense')"},{"default":"q.all_animations_finished && Math.random(0, 15) < 1"}]},"retreat":{"animations":["retreat"],"on_entry":["@s set_move_retreat","/playsound sound.spark.duelist_disengage @a ~ ~ ~"],"on_exit":["@s set_player_move_idle"],"transitions":[{"idle":"q.all_animations_finished"}]},"withdraw":{"animations":["timeout_800ms"],"on_entry":["@s set_move_withdraw"],"transitions":[{"default":"q.all_animations_finished"}]},"approach":{"animations":["approach"],"on_entry":["@s set_move_approach"],"transitions":[{"withdraw":"q.property('spark:evaded_attack') && Math.random(0, 100) < q.property('spark:chance_withdraw')"},{"block":"q.property('spark:evaded_attack')"},{"default":"q.all_animations_finished"}]},"strafe":{"transitions":[{"left":"Math.random(0, 1) < 0.5"},{"right":"1"}]},"left":{"animations":["left"],"on_entry":["@s set_move_left"],"transitions":[{"withdraw":"q.property('spark:evaded_attack') && Math.random(0, 100) < q.property('spark:chance_withdraw')"},{"block":"q.property('spark:evaded_attack')"},{"default":"q.all_animations_finished"}]},"right":{"animations":["right"],"on_entry":["@s set_move_right"],"transitions":[{"withdraw":"q.property('spark:evaded_attack') && Math.random(0, 100) < q.property('spark:chance_withdraw')"},{"block":"q.property('spark:evaded_attack')"},{"default":"q.all_animations_finished"}]}}},"controller.animation.spark.duel_opponent.react_to_attack":{"states":{"default":{"transitions":[{"block_attack":"q.property('spark:blocked_attack')"},{"evade_attack":"q.property('spark:evaded_attack')"}]},"block_attack":{"animations":["timeout_300ms"],"on_entry":["/execute at @s positioned ^ ^ ^1 run particle spark:lightsaber_contact ~ ~ ~","/execute at @s positioned ^ ^ ^1 run playsound sound.spark.lightsaber_clash @a ~ ~ ~"],"on_exit":["@s reset_block_attack"],"transitions":[{"default":"q.all_animations_finished"}]},"evade_attack":{"animations":["timeout_300ms"],"on_exit":["@s reset_evade_attack"],"transitions":[{"block_attack":"q.property('spark:blocked_attack')"},{"default":"q.all_animations_finished"}]}}},"controller.animation.spark.duel_opponent.got_hit":{"states":{"default":{"transitions":[{"damage":"q.health > 1"},{"die":"q.health <= 1"}]},"damage":{"animations":["got_hit"],"transitions":[{"default":"q.all_animations_finished"}]},"die":{"animations":["timeout_300ms"],"on_entry":["@s defeat"],"transitions":[{"default":"q.all_animations_finished"}]}}}}}
